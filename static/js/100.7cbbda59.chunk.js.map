{"version":3,"sources":["app/views/canvas/abi/simpleStakingABI.js","app/views/canvas/abi/address.js","app/views/canvas/utils/contractConnect.js","app/views/canvas/utils/getStakedAmount.js","app/views/canvas/utils/streaming.js","app/views/canvas/abi/erc20abi.js","app/views/canvas/utils/stake.js","app/views/canvas/utils/redeem.js","app/views/canvas/StakingModal.jsx","app/views/canvas/Stake.jsx"],"names":["abi","address","provider","ethers","providers","Web3Provider","window","web3","currentProvider","console","log","signer","getSigner","contract","Contract","contractAddress","ethereum","selectedAddress","getStakedAmount","a","balances","tx","toString","Number","toFixed","COMPOUND_API_CTOKEN_URL","rate","streamingAmt","stake","loadMessage","axios","get","then","response","data","cToken","filter","obj","symbol","supply_rate","value","catch","erc20abi","amount","dai","DAI_ADDRESS","getAddress","account","daiContract","allowance","lt","utils","bigNumberify","approve","constants","MaxUint256","approveTx","wait","gasLimit","NotificationManager","success","warning","setTimeout","location","reload","redeem","StakeModal","props","state","handleChange","bind","e","this","setState","target","className","style","display","XXheight","flexDirection","onChange","XXclassName","padding","onClick","Component","Stake","getStake","res","err","getStreaming","streaming","stakeDai","leftIcon","leftTitle","leftSubtitle","rightIcon","rightTitle","rightSubtitle","modal","EthereumDapp","SimpleCard","title","map","card","index","StakingModal"],"mappings":"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","file":"static/js/100.7cbbda59.chunk.js","sourcesContent":["let abi = [\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"constructor\"\r\n\t},\r\n\t{\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"fallback\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": true,\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"alfredDao\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": true,\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"balances\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": true,\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"mcdContract\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": true,\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"owner\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": true,\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"rDaiContract\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": false,\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"redeem\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"bool\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"bool\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": true,\r\n\t\t\"stateMutability\": \"payable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": false,\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"amount\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"stake\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"bool\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"bool\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": true,\r\n\t\t\"stateMutability\": \"payable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n]\r\n\r\nexport default abi;","const address = \"0xf871EFEFB58aE7C72f646416B91115F379eFd5f5\"\r\n\r\nexport default address;","import { ethers, Contract, Wallet } from 'ethers'\r\nimport abi from '../abi/simpleStakingABI'\r\nimport contractAddress from '../abi/address'\r\n\r\nlet provider = new ethers.providers.Web3Provider(window.web3.currentProvider);\r\n// let provider = getDefaultProvider()\r\nconsole.log(\"provider\", provider);\r\n\r\n// export let wallet = new Wallet(provider)\r\n\r\nexport const signer = provider.getSigner();\r\n\r\nexport const contract = new Contract(contractAddress, abi, signer)\r\nconsole.log(\"contract\", contract);\r\n\r\n// export const contractWithSigner = contract.connect(provider)\r\n\r\n","import {contract} from './contractConnect'\r\n\r\nlet address = window.ethereum.selectedAddress;\r\n\r\nexport async function getStakedAmount(){\r\n    const tx = await contract.balances(address)\r\n    console.log(\"tx:\",tx.toString())\r\n\r\n    return (Number(tx.toString())/10**18).toFixed(4);\r\n}\r\n","import axios from \"axios\"\r\n// import {contract} from './contractConnect'\r\nimport {getStakedAmount} from './getStakedAmount'\r\n\r\nconst NETWORK = 'mainnet';\r\nconst COMPOUND_API_CTOKEN_URL = `https://api.compound.finance/api/v2/ctoken?network=${NETWORK}`;\r\n\r\nexport async function streaming (){\r\n    let address = window.ethereum.selectedAddress;\r\n    let rate = null;\r\n    let streamingAmt = null;\r\n\r\n    // let staked equal getStakedAmount()\r\n    let stake = await getStakedAmount(address);\r\n    // console.log(\"streaming.stake:\", stake);\r\n    \r\n    // let streaming equal {stake * apy}\r\n    let loadMessage = async() => {\r\n        return axios.get(COMPOUND_API_CTOKEN_URL)\r\n        .then(function (response) {\r\n          \r\n          console.log('Response from the server: ', response)\r\n          // document.getElementById('content').innerText = JSON.stringify(response.data.cToken, null, 2)\r\n          rate = response.data.cToken;\r\n          rate = rate.filter(obj => obj.symbol === \"cDAI\");\r\n          rate = rate[0].supply_rate.value\r\n          // console.log(\"streaming.rate:\",rate)\r\n          console.log(\"stake * rate:\", stake * rate)\r\n          streamingAmt = rate * stake\r\n          console.log(\"streamingAmt\", streamingAmt)\r\n          return streamingAmt\r\n        })\r\n        .catch(function (response) {\r\n          console.log(response)\r\n        })\r\n    }\r\n\r\n    // loadMessage().then(res => console.log(\"loadMessage:\", res))\r\n\r\n    return await loadMessage();\r\n\r\n    // let fundedTotal equal {accumulatedValue - staked}\r\n    \r\n    // return fundedTotal\r\n    // console.log(\"stake * rate:\", stake * rate)\r\n    // return stake * rate;\r\n\r\n};","let erc20abi = [\r\n\t{\r\n\t\t\"anonymous\": false,\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"indexed\": true,\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"owner\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"indexed\": true,\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"spender\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"indexed\": false,\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"value\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"Approval\",\r\n\t\t\"type\": \"event\"\r\n\t},\r\n\t{\r\n\t\t\"anonymous\": false,\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"indexed\": true,\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"from\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"indexed\": true,\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"to\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"indexed\": false,\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"value\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"Transfer\",\r\n\t\t\"type\": \"event\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": true,\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"owner\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"spender\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"allowance\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": false,\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"spender\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"amount\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"approve\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"bool\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"bool\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": true,\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"account\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"balanceOf\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": true,\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"totalSupply\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": false,\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"recipient\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"amount\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"transfer\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"bool\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"bool\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"constant\": false,\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"sender\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"recipient\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"amount\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"transferFrom\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"bool\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"bool\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"payable\": false,\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"function\"\r\n\t}\r\n];\r\n\r\nexport default erc20abi;\r\n","// call stake(amountOfDai) on SimpleStaking contract\r\nimport { contract } from './contractConnect'\r\nimport {NotificationManager} from \"react-notifications\";\r\nimport {Contract, ethers} from \"ethers\";\r\nimport contractAddress from \"../abi/address\";\r\nimport abi from \"../abi/simpleStakingABI\";\r\nimport erc20abi from \"../abi/erc20abi\";\r\n\r\nexport async function stake(amount){\r\n\r\n    console.log(\"contract:\", contract)\r\n    // console.log(\"contractWithSigner:\" ,contractWithSigner)\r\n    let dai = amount * 10 ** 18\r\n    dai = dai.toString()\r\n    console.log(\"dai:\", dai)\r\n\r\n\r\n    // Approve contract to spend Dai on users behalf if necessary:\r\n    const DAI_ADDRESS = \"0x4F96Fe3b7A6Cf9725f59d353F723c1bDb64CA6Aa\";\r\n    let provider = new ethers.providers.Web3Provider(window.web3.currentProvider);\r\n    console.log(\"provider\", provider);\r\n    const signer = provider.getSigner();\r\n    // const contract = new Contract(contractAddress, abi, signer);\r\n    // console.log(\"contract\", contract);\r\n    // console.log(\"signer\", await signer.getAddress());\r\n    const account = await signer.getAddress();\r\n    const daiContract = new Contract(DAI_ADDRESS, erc20abi, signer);\r\n    let allowance = await daiContract.allowance(account, contractAddress);\r\n    if(allowance.lt(ethers.utils.bigNumberify(dai))) {\r\n        // Allowance is too low, request approval\r\n        let approveTx = await daiContract.approve(contractAddress, ethers.constants.MaxUint256);\r\n        await approveTx.wait();\r\n    }\r\n\r\n\r\n    let tx = await contract.stake(dai, {gasLimit: 1000000});\r\n\r\n    console.log(\"tx:\",tx.toString())\r\n    try {\r\n        await tx.wait();\r\n        NotificationManager.success(\r\n            \"Your approval transaction was successful. You will be prompted to complete one more transaction to finish the deposit\",\r\n            \"Success\"\r\n        );\r\n    } catch (e) {\r\n        NotificationManager.warning(\r\n            \"There was a problem with your transaction\",\r\n            \"Error\"\r\n        );\r\n        return false;\r\n    }\r\n    // const sendPromise = wallet.sendTransaction(tx)\r\n    // sendPromise.then((tx) => {\r\n    //     console.log(\"sendPromise.then:\", tx);\r\n    // });\r\n\r\n    NotificationManager.success(\r\n        \"Your Dai has been staked with rDAI and is now generating donations from the interest\",\r\n        \"Success\"\r\n    );\r\n\r\n    // TODO: Gracefully refresh the state\r\n    setTimeout(function () {\r\n        window.location.reload();\r\n    }, 2000);\r\n\r\n    return true;\r\n}","// call redeem() on SimpleStaking contract\r\nimport { contract } from './contractConnect'\r\nimport {NotificationManager} from \"react-notifications\";\r\n\r\nexport async function redeem(){\r\n    console.log(\"contract:\", contract)\r\n    // console.log(\"contractWithSigner:\" ,contractWithSigner)\r\n    // let dai = amount * 10 ** 18\r\n    // dai = dai.toString()\r\n    // console.log(\"dai:\", dai)\r\n    let tx = await contract.redeem({gasLimit: 1000000})\r\n    // tx = \r\n    console.log(\"tx:\",tx.toString())\r\n    // const sendPromise = wallet.sendTransaction(tx)\r\n    // sendPromise.then((tx) => {\r\n    //     console.log(\"sendPromise.then:\", tx);\r\n    // });\r\n\r\n    try {\r\n        await tx.wait();\r\n    } catch (e) {\r\n        NotificationManager.warning(\r\n            \"There was a problem with your transaction\",\r\n            \"Error\"\r\n        );\r\n        return false;\r\n    }\r\n\r\n    NotificationManager.success(\r\n        \"Your Dai has been redeemed from rDAI and is no longer generating interest\",\r\n        \"Success\"\r\n    );\r\n\r\n    // TODO: Gracefully refresh the state\r\n    setTimeout(function () {\r\n        window.location.reload();\r\n    }, 2000);\r\n\r\n\r\n    return true;\r\n}","import React, { Component, Fragment } from \"react\";\r\nimport { stake } from \"./utils/stake\";\r\nimport { redeem } from \"./utils/redeem\";\r\n\r\nclass StakeModal extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      dai: 0,\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.setState({dai: e.target.value});\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n        <Fragment>\r\n\r\n          <div>\r\n\r\n            <div className=\"col-lg-6 col-md-6 col-sm-6\" style={{display: \"flex\", XXheight: \"76px\"}}>\r\n              <div className=\"card o-hidden\" style={{display: \"flex\", flexDirection: \"column\"}}>\r\n                <div className=\"card-body\">\r\n                  <label>How much Dai would you like to stake?\r\n                    <input className=\"form-control\" onChange={this.handleChange}/>\r\n                  </label>\r\n                  <div>\r\n                  <button className=\"d-block w-100 my-2 text-capitalize btn btn-primary\" XXclassName=\"XXXcard-body d-block text-center\" style={{padding: \"4px\"}}\r\n                          onClick={(e) => stake(this.state.dai)}>\r\n                    Stake it!\r\n                  </button>\r\n                  </div>\r\n                  <div>\r\n                  <button className=\"d-block w-100 my-2 text-capitalize btn btn-primary\" XXclassName=\"XXXcard-body d-block text-center\" style={{padding: \"4px\"}} onClick={(e) => redeem()}>\r\n                    Un-stake it!\r\n                  </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n\r\n        </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default StakeModal;","import React, {Component, Fragment} from \"react\";\r\nimport {getStakedAmount} from \"./utils/getStakedAmount\";\r\nimport {streaming} from \"./utils/streaming\";\r\nimport StakingModal from \"./StakingModal\";\r\nimport {redeem} from \"./utils/redeem\";\r\nimport SimpleCard from \"../../../@gull/components/cards/SimpleCard\";\r\nimport {NotificationContainer} from \"react-notifications\";\r\nimport EthereumDapp from \"../dapp/EthereumDapp\";\r\n\r\nclass Stake extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            stakeDai: [\r\n                {\r\n                    leftIcon: \"i-Money-2\",\r\n                    leftTitle: \"120.00\",\r\n                    leftSubtitle: \"staked\",\r\n                    rightIcon: \"i-Financial\",\r\n                    rightTitle: \"4.0210\",\r\n                    rightSubtitle: \"Streaming\"\r\n                }\r\n            ],\r\n            stake: 0,\r\n            rate: 0,\r\n            modal: false,\r\n        };\r\n\r\n        this.getStake = this.getStake.bind(this)\r\n        this.getStreaming = this.getStreaming.bind(this)\r\n        this.redeem = this.redeem.bind(this)\r\n    }\r\n\r\n    getStake = () => {\r\n        getStakedAmount()\r\n            .then(\r\n                res => this.setState({stake: res})\r\n            ).catch(\r\n            err => console.log(\"err:\", err)\r\n        )\r\n    }\r\n\r\n    getStreaming = () => {\r\n        // streaming().then(\r\n        //   res => console.log(\"streaming():\", res)\r\n        // )\r\n        streaming()\r\n        // .then(res => console.log(\"getStreaming response:\",res))\r\n            .then(res => this.setState({rate: res.toFixed(2) + \"/yr\"})\r\n            ).catch(\r\n            err => console.log(\"err:\", err)\r\n        )\r\n    }\r\n\r\n    redeem = () => {\r\n        redeem()\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getStake()\r\n\r\n        this.getStreaming()\r\n\r\n        console.log(\"state:\", this.state)\r\n    }\r\n\r\n    render() {\r\n        let {stakeDai = []} = this.state;\r\n        // this.getStreaming();\r\n\r\n        return (\r\n            <EthereumDapp>\r\n                <Fragment>\r\n                    <NotificationContainer/>\r\n                    <SimpleCard title=\"Stake with rDAI and Donate Interest\">\r\n                        <div className=\"mb-4\">\r\n                            Put your money to work passively. Stake Dai through rDai to help fund Alfred.Estate's DeFi development efforts:\r\n                        </div>\r\n                        <div>\r\n                            {stakeDai.map((card, index) => (\r\n                                <Fragment>\r\n                                    <div className=\"row\">\r\n                                        <div className=\"cursor-pointer col-lg-3 col-md-6 col-sm-6\"\r\n                                             onClick={(e) => this.setState({modal: !this.state.modal})}>\r\n                                            <div className=\"card card-icon-bg card-icon-bg-primary o-hidden mb-4\">\r\n                                                <div className=\"card-body text-center\"><i className={card.leftIcon}></i>\r\n                                                    <div className=\"content\"><p\r\n                                                        className=\"text-muted mt-2 mb-0 text-capitalize\">{card.leftSubtitle}</p>\r\n                                                        <p\r\n                                                            className=\"lead text-primary text-24 mb-2 text-capitalize\">{this.state.stake && this.state.stake}&nbsp;Dai</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"col-lg-3 col-md-6 col-sm-6\">\r\n                                            <div className=\"card card-icon-bg card-icon-bg-primary o-hidden mb-4\">\r\n                                                <div className=\"card-body text-center\"><i className={card.rightIcon}></i>\r\n                                                    <div className=\"content\"><p\r\n                                                        className=\"text-muted mt-2 mb-0 text-capitalize\">{card.rightSubtitle}</p>\r\n                                                        <p\r\n                                                            className=\"lead text-primary text-24 mb-2 text-capitalize\">{this.state.rate && this.state.rate}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/*<div key={index} className=\"col-lg-6 col-md-6 col-sm-6\" style={{display: \"flex\", height: \"76px\"}}>*/}\r\n                                    {/*  <div className=\"card o-hidden\" style={{display: \"flex\", flexDirection: \"row\"}}>*/}\r\n\r\n                                    {/*    <button className=\"card-body text-center\" style={{padding: \"4px\"}}*/}\r\n                                    {/*            onClick={(e) => this.setState({modal: !this.state.modal})}>*/}\r\n                                    {/*      <i className={card.leftIcon}></i>*/}\r\n                                    {/*      <div>*/}\r\n                                    {/*        <p className=\"text-muted text-capitalize\" style={{marginBottom: \"0px\"}}>*/}\r\n                                    {/*          {card.leftSubtitle}*/}\r\n                                    {/*        </p>*/}\r\n                                    {/*        <p className=\"lead text-primary text-capitalize\">*/}\r\n                                    {/*          {this.state.stake && this.state.stake}*/}\r\n                                    {/*        </p>*/}\r\n                                    {/*      </div>*/}\r\n                                    {/*    </button>*/}\r\n\r\n                                    {/*    <button className=\"card-body text-center\" style={{padding: \"4px\"}} onClick={(e) => {*/}\r\n                                    {/*      this.redeem()*/}\r\n                                    {/*    }}>*/}\r\n                                    {/*      <i className={card.rightIcon}></i>*/}\r\n                                    {/*      <div>*/}\r\n                                    {/*        <p className=\"text-muted text-capitalize\" style={{marginBottom: \"0px\"}}>*/}\r\n                                    {/*          {card.rightSubtitle}*/}\r\n                                    {/*        </p>*/}\r\n                                    {/*        <p className=\"lead text-primary text-capitalize\">*/}\r\n                                    {/*          {this.state.rate && this.state.rate}*/}\r\n                                    {/*        </p>*/}\r\n                                    {/*      </div>*/}\r\n                                    {/*    </button>*/}\r\n\r\n                                    {/*  </div>*/}\r\n                                    {/*</div>*/}\r\n                                </Fragment>\r\n                            ))}\r\n                        </div>\r\n                    </SimpleCard>\r\n\r\n                    {this.state.modal && <StakingModal/>}\r\n\r\n\r\n                </Fragment>\r\n            </EthereumDapp>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Stake;\r\n"],"sourceRoot":""}